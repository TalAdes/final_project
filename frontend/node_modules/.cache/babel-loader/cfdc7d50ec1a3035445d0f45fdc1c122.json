{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\54646\\\\OneDrive - g.jct.ac.il\\\\\\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\\\u05E4\\u05E8\\u05D5\\u05D9\\u05E7\\u05D8 \\u05D2\\u05DE\\u05E8 \\u05D4\\u05E0\\u05D3\\u05E1\\u05EA \\u05EA\\u05D5\\u05DB\\u05E0\\u05D4 \\u05DC\\u05D0\\u05D9\\u05E0\\u05D8\\u05E8\\u05E0\\u05D8\\\\final_project_webengineer backend\\\\frontend\\\\src\\\\Components\\\\Details\\\\Details.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport \"./Details.css\";\nimport Button from \"@material-ui/core/Button\";\nimport AddShoppingCartIcon from \"@material-ui/icons/AddShoppingCart\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { addItemInCart } from \"../../Redux/Actions\";\nimport Api from \"../../Api\";\nimport Item from \"../Item/Item\";\nimport { connect } from \"react-redux\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Slider from \"react-slick\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\n\nvar Remarkable = require(\"remarkable\");\n\nvar ConnectedDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ConnectedDetails, _Component);\n\n  function ConnectedDetails(props) {\n    var _this;\n\n    _classCallCheck(this, ConnectedDetails);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConnectedDetails).call(this, props));\n    _this.isCompMounted = false;\n    _this.state = {\n      relatedItems: [],\n      quantity: \"1\",\n      item: null,\n      unfinishedTasks: 0\n    };\n    return _this;\n  }\n\n  _createClass(ConnectedDetails, [{\n    key: \"fetchProductUsingID\",\n    value: function () {\n      var _fetchProductUsingID = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        var item, relatedItems;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState(function (ps) {\n                  return {\n                    unfinishedTasks: ps.unfinishedTasks + 1\n                  };\n                }); // First, let's get the item, details of which we want to show.\n\n                _context.next = 3;\n                return Api.getItemUsingID(id);\n\n              case 3:\n                item = _context.sent;\n                _context.next = 6;\n                return Api.searchItems({\n                  category: item.category,\n                  page: \"1\",\n                  itemsPerPage: \"5\"\n                });\n\n              case 6:\n                relatedItems = _context.sent;\n\n                if (this.isCompMounted) {\n                  this.setState(function (ps) {\n                    return {\n                      item: item,\n                      unfinishedTasks: ps.unfinishedTasks - 1,\n                      relatedItems: relatedItems.data.filter(function (x) {\n                        return x.id !== item.id;\n                      })\n                    };\n                  });\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchProductUsingID(_x) {\n        return _fetchProductUsingID.apply(this, arguments);\n      }\n\n      return fetchProductUsingID;\n    }()\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      this.fetchProductUsingID(nextProps.match.params.id);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.isCompMounted = true;\n      this.fetchProductUsingID(this.props.match.params.id);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.isCompMounted = false;\n    } // Product information contains markup, we use Remarkable for this.\n\n  }, {\n    key: \"getRawMarkup\",\n    value: function getRawMarkup(data) {\n      var md = new Remarkable();\n      return {\n        __html: md.render(data)\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.unfinishedTasks !== 0) {\n        return React.createElement(CircularProgress, {\n          className: \"circular\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        });\n      }\n\n      if (!this.state.item) {\n        return null;\n      }\n\n      var settings = {\n        dots: true,\n        infinite: true,\n        speed: 500,\n        focusOnSelect: false,\n        slidesToShow: 1,\n        slidesToScroll: 1\n      };\n      var settingsRelatedItems = {\n        dots: true,\n        infinite: true,\n        speed: 500,\n        focusOnSelect: false,\n        slidesToShow: this.state.relatedItems.length < 3 ? this.state.relatedItems.length : 3,\n        slidesToScroll: this.state.relatedItems.length < 3 ? this.state.relatedItems.length : 3\n      };\n      return React.createElement(\"div\", {\n        className: \"details\",\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          color: \"#504F5A\",\n          marginTop: 15,\n          marginBottom: 20,\n          fontSize: 22\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.state.item.name), React.createElement(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: 290,\n          height: 290,\n          paddingTop: 5,\n          paddingBottom: 5,\n          paddingLeft: 40,\n          paddingRight: 40,\n          border: \"1px solid lightgray\",\n          borderRadius: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Slider, Object.assign({}, settings, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), this.state.item.imageUrls.map(function (x) {\n        // NOTE: If I pass img directly instead of wrapping it in div, this component seems to mess up its styles.\n        return React.createElement(\"div\", {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"Item\",\n          style: {\n            objectFit: \"contain\",\n            height: 290,\n            width: 290\n          },\n          src: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }));\n      }))), React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          marginLeft: 20,\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          fontSize: 18,\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Price: \", this.state.item.price, \" $\"), this.state.item.popular && React.createElement(\"span\", {\n        style: {\n          color: \"#1a9349\",\n          marginTop: 5,\n          fontSize: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"(Popular product)\"), React.createElement(TextField, {\n        type: \"number\",\n        value: this.state.quantity,\n        style: {\n          marginTop: 20,\n          marginBottom: 20,\n          width: 50\n        },\n        label: \"Quantity\",\n        onChange: function onChange(e) {\n          var val = parseInt(e.target.value);\n          if (val < 1 || val > 10) return;\n\n          _this2.setState({\n            quantity: val.toString()\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(Button, {\n        style: {\n          width: 200,\n          marginTop: 5\n        },\n        color: \"primary\",\n        variant: \"contained\",\n        onClick: function onClick() {\n          _this2.props.dispatch(addItemInCart(_objectSpread({}, _this2.state.item, {\n            quantity: parseInt(_this2.state.quantity)\n          })));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Add to Cart \", React.createElement(AddShoppingCartIcon, {\n        style: {\n          marginLeft: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        style: {\n          color: \"#504F5A\",\n          marginTop: 50,\n          marginBottom: 10,\n          fontSize: 22\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Product Description\"), this.state.item.description ? React.createElement(\"div\", {\n        style: {\n          color: \"gray\",\n          marginLeft: 5,\n          maxHeight: 200,\n          fontSize: 13,\n          overflow: \"auto\"\n        },\n        dangerouslySetInnerHTML: this.getRawMarkup(this.state.item.description),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        style: {\n          color: \"gray\",\n          marginTop: 20,\n          marginBottom: 20,\n          marginLeft: 5,\n          maxHeight: 200,\n          fontSize: 13,\n          overflow: \"auto\"\n        },\n        dangerouslySetInnerHTML: {\n          __html: \"Not available\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          color: \"#504F5A\",\n          marginTop: 10,\n          marginBottom: 20,\n          fontSize: 22\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Related Items\"), this.state.relatedItems.length === 0 ? React.createElement(\"div\", {\n        style: {\n          fontSize: 13,\n          color: \"gray\",\n          marginLeft: 10,\n          marginBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Not available\") : React.createElement(\"div\", {\n        style: {\n          width: 600,\n          height: 320,\n          paddingLeft: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Slider, Object.assign({}, settingsRelatedItems, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), this.state.relatedItems.map(function (x) {\n        return React.createElement(Item, {\n          key: x.id,\n          item: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        });\n      }))));\n    }\n  }]);\n\n  return ConnectedDetails;\n}(Component);\n\nvar Details = connect()(ConnectedDetails);\nexport default Details;","map":{"version":3,"sources":["C:/Users/54646/OneDrive - g.jct.ac.il/תוכנה לאינטרנט/פרויקט גמר הנדסת תוכנה לאינטרנט/final_project_webengineer backend/frontend/src/Components/Details/Details.js"],"names":["React","Component","Button","AddShoppingCartIcon","CircularProgress","addItemInCart","Api","Item","connect","TextField","Slider","Remarkable","require","ConnectedDetails","props","isCompMounted","state","relatedItems","quantity","item","unfinishedTasks","id","setState","ps","getItemUsingID","searchItems","category","page","itemsPerPage","data","filter","x","nextProps","fetchProductUsingID","match","params","md","__html","render","settings","dots","infinite","speed","focusOnSelect","slidesToShow","slidesToScroll","settingsRelatedItems","length","padding","color","marginTop","marginBottom","fontSize","name","display","width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","border","borderRadius","imageUrls","map","objectFit","flex","marginLeft","flexDirection","price","popular","e","val","parseInt","target","value","toString","dispatch","description","maxHeight","overflow","getRawMarkup","Details"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Details.css\";\nimport Button from \"@material-ui/core/Button\";\nimport AddShoppingCartIcon from \"@material-ui/icons/AddShoppingCart\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { addItemInCart } from \"../../Redux/Actions\";\nimport Api from \"../../Api\";\nimport Item from \"../Item/Item\";\nimport { connect } from \"react-redux\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Slider from \"react-slick\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\n\nvar Remarkable = require(\"remarkable\");\n\nclass ConnectedDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.isCompMounted = false;\n\n    this.state = {\n      relatedItems: [],\n      quantity: \"1\",\n      item: null,\n      unfinishedTasks: 0\n    };\n  }\n\n  async fetchProductUsingID(id) {\n    this.setState(ps => ({ unfinishedTasks: ps.unfinishedTasks + 1 }));\n\n    // First, let's get the item, details of which we want to show.\n    let item = await Api.getItemUsingID(id);\n\n    // Now, get items from same category.\n    let relatedItems = await Api.searchItems({\n      category: item.category,\n      page: \"1\",\n      itemsPerPage: \"5\"\n    });\n\n    if (this.isCompMounted) {\n      this.setState(ps => {\n        return {\n          item,\n          unfinishedTasks: ps.unfinishedTasks - 1,\n          relatedItems: relatedItems.data.filter(x => x.id !== item.id)\n        };\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.fetchProductUsingID(nextProps.match.params.id);\n  }\n\n  componentDidMount() {\n    this.isCompMounted = true;\n    this.fetchProductUsingID(this.props.match.params.id);\n  }\n\n  componentWillUnmount() {\n    this.isCompMounted = false;\n  }\n\n  // Product information contains markup, we use Remarkable for this.\n  getRawMarkup(data) {\n    const md = new Remarkable();\n    return { __html: md.render(data) };\n  }\n\n  render() {\n    if (this.state.unfinishedTasks !== 0) {\n      return <CircularProgress className=\"circular\" />;\n    }\n\n    if (!this.state.item) {\n      return null;\n    }\n\n    let settings = {\n      dots: true,\n      infinite: true,\n      speed: 500,\n      focusOnSelect: false,\n      slidesToShow: 1,\n      slidesToScroll: 1\n    };\n\n    let settingsRelatedItems = {\n      dots: true,\n      infinite: true,\n      speed: 500,\n      focusOnSelect: false,\n      slidesToShow:\n        this.state.relatedItems.length < 3 ? this.state.relatedItems.length : 3,\n      slidesToScroll:\n        this.state.relatedItems.length < 3 ? this.state.relatedItems.length : 3\n    };\n\n    return (\n      <div className=\"details\" style={{ padding: 10 }}>\n        <div\n          style={{\n            color: \"#504F5A\",\n            marginTop: 15,\n            marginBottom: 20,\n            fontSize: 22\n          }}\n        >\n          {this.state.item.name}\n        </div>\n        <div style={{ display: \"flex\" }}>\n          <div\n            style={{\n              width: 290,\n              height: 290,\n              paddingTop: 5,\n              paddingBottom: 5,\n              paddingLeft: 40,\n              paddingRight: 40,\n              border: \"1px solid lightgray\",\n              borderRadius: \"5px\"\n            }}\n          >\n            <Slider {...settings}>\n              {this.state.item.imageUrls.map(x => {\n                // NOTE: If I pass img directly instead of wrapping it in div, this component seems to mess up its styles.\n                return (\n                  <div key={x}>\n                    <img\n                      alt=\"Item\"\n                      style={{\n                        objectFit: \"contain\",\n                        height: 290,\n                        width: 290\n                      }}\n                      src={x}\n                    />\n                  </div>\n                );\n              })}\n            </Slider>\n          </div>\n          <div\n            style={{\n              flex: 1,\n              marginLeft: 20,\n              display: \"flex\",\n              flexDirection: \"column\"\n            }}\n          >\n            <div style={{ fontSize: 18, marginTop: 10 }}>\n              Price: {this.state.item.price} $\n            </div>\n            {this.state.item.popular && (\n              <span style={{ color: \"#1a9349\", marginTop: 5, fontSize: 14 }}>\n                (Popular product)\n              </span>\n            )}\n\n            <TextField\n              type=\"number\"\n              value={this.state.quantity}\n              style={{ marginTop: 20, marginBottom: 20, width: 50 }}\n              label=\"Quantity\"\n              onChange={e => {\n                let val = parseInt(e.target.value);\n                if (val < 1 || val > 10) return;\n                this.setState({ quantity: val.toString() });\n              }}\n            />\n            <Button\n              style={{ width: 200, marginTop: 5 }}\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={() => {\n                this.props.dispatch(\n                  addItemInCart({\n                    ...this.state.item,\n                    quantity: parseInt(this.state.quantity)\n                  })\n                );\n              }}\n            >\n              Add to Cart <AddShoppingCartIcon style={{ marginLeft: 5 }} />\n            </Button>\n          </div>\n        </div>\n\n        <div\n          style={{\n            color: \"#504F5A\",\n            marginTop: 50,\n            marginBottom: 10,\n            fontSize: 22\n          }}\n        >\n          Product Description\n        </div>\n\n        {this.state.item.description ? (\n          <div\n            style={{\n              color: \"gray\",\n              marginLeft: 5,\n              maxHeight: 200,\n              fontSize: 13,\n              overflow: \"auto\"\n            }}\n            dangerouslySetInnerHTML={this.getRawMarkup(\n              this.state.item.description\n            )}\n          />\n        ) : (\n          <div\n            style={{\n              color: \"gray\",\n              marginTop: 20,\n              marginBottom: 20,\n              marginLeft: 5,\n              maxHeight: 200,\n              fontSize: 13,\n              overflow: \"auto\"\n            }}\n            dangerouslySetInnerHTML={{ __html: \"Not available\" }}\n          />\n        )}\n\n        <div\n          style={{\n            color: \"#504F5A\",\n            marginTop: 10,\n            marginBottom: 20,\n            fontSize: 22\n          }}\n        >\n          Related Items\n        </div>\n\n        {this.state.relatedItems.length === 0 ? (\n          <div\n            style={{\n              fontSize: 13,\n              color: \"gray\",\n              marginLeft: 10,\n              marginBottom: 10\n            }}\n          >\n            Not available\n          </div>\n        ) : (\n          <div style={{ width: 600, height: 320, paddingLeft: 40 }}>\n            <Slider {...settingsRelatedItems}>\n              {this.state.relatedItems.map(x => {\n                return <Item key={x.id} item={x} />;\n              })}\n            </Slider>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nlet Details = connect()(ConnectedDetails);\nexport default Details;\n"]},"metadata":{},"sourceType":"module"}